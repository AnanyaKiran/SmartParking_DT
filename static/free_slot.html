<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Parking Slot</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h2>üöò Free Your Parking Slot</h2>
    <div id="result"></div>
    <button id="free-slot-btn">Free Slot</button>

    <script>
        const params = new URLSearchParams(window.location.search);
        const vehicle_id = params.get("vehicle_id");
        const backendURL = "https://your-backend-url.onrender.com"; // ‚ö†Ô∏è Change this

        document.getElementById("free-slot-btn").onclick = async () => {
            try {
                const response = await fetch(`${backendURL}/slots/free_by_user/${vehicle_id}`, {
                    method: "POST",
                    headers: { "api_key": "mysecret123" }
                });
                const data = await response.json();
                document.getElementById("result").innerHTML = `
                    <h3>‚úÖ Slot Freed Successfully!</h3>
                    <p>Amount Due: ‚Çπ${data.amount_due}</p>
                    <p>Thank you for using Smart Parking!</p>
                `;
            } catch (err) {
                document.getElementById("result").innerHTML = "<p>‚ö†Ô∏è Error freeing slot.</p>";
                console.error(err);
            }
        };
    </script>
</body>
</html>
